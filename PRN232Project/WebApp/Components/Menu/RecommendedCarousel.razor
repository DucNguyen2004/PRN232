@using DTOs

@if (RecommendedProducts != null && RecommendedProducts.Any())
{
    <h5>Recommended Products</h5>
    <div id="@CarouselId" class="carousel slide" data-bs-ride="carousel">
        <div class="carousel-inner">
            @for (int slide = 0; slide < (int)Math.Ceiling(RecommendedProducts.Count / 4.0); slide++)
            {
                var items = RecommendedProducts.Skip(slide * 4).Take(4).ToList();
                <div class="carousel-item @(slide == 0 ? "active" : "")">
                    <div class="row">
                        @foreach (var item in items)
                        {
                            <div class="col-3">
                                <MenuItem Name="@item.Name"
                                          ImageUrl="@(item.Images?.FirstOrDefault() ?? "default-image.jpg")"
                                          Price="@item.Price" />
                            </div>
                        }
                    </div>
                </div>
            }
        </div>

        <button class="carousel-control-prev" type="button" data-bs-target="#@CarouselId" data-bs-slide="prev">
            <span class="carousel-control-prev-icon" aria-hidden="true"></span>
            <span class="visually-hidden">Previous</span>
        </button>
        <button class="carousel-control-next" type="button" data-bs-target="#@CarouselId" data-bs-slide="next">
            <span class="carousel-control-next-icon" aria-hidden="true"></span>
            <span class="visually-hidden">Next</span>
        </button>
    </div>
}

@code {
    [Parameter]
    public List<ProductResponseDto> RecommendedProducts { get; set; } = new();

    private string CarouselId => $"carousel-{Guid.NewGuid().ToString("N")}";
}